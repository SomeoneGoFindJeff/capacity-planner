{% extends 'base.html' %}
{% block content %}
  <h2>Resources</h2>

  <!-- Add new resource -->
  <form method="post" action="{{ url_for('add_resource') }}">
    <input type="text" name="name" placeholder="Name" required>
    <select name="type_id">
      <option value="">-- Type --</option>
      {% for t in types %}
        <option value="{{ t.id }}">{{ t.name }}</option>
      {% endfor %}
    </select>
    <select name="group_id">
      <option value="">-- Group --</option>
      {% for g in groups %}
        <option value="{{ g.id }}">{{ g.name }}</option>
      {% endfor %}
    </select>
    <button>
      <span class="material-icons">person_add</span> Add
    </button>
  </form>

  <!-- List existing resources -->
  <ul>
    {% for r in resources %}
      <li>
        <form method="post"
              action="{{ url_for('edit_resource', resource_id=r.id) }}"
              style="display:inline;">
          <input type="text" name="name" value="{{ r.name }}" required>
          <select name="type_id">
            <option value="">-- Type --</option>
            {% for t in types %}
              <option value="{{ t.id }}"
                      {% if r.type_id==t.id %}selected{% endif %}>
                {{ t.name }}
              </option>
            {% endfor %}
          </select>
          <select name="group_id">
            <option value="">-- Group --</option>
            {% for g in groups %}
              <option value="{{ g.id }}"
                      {% if r.group_id==g.id %}selected{% endif %}>
                {{ g.name }}
              </option>
            {% endfor %}
          </select>
          <button title="Update">
            <span class="material-icons">edit</span>
          </button>
        </form>
        <form method="post"
              action="{{ url_for('delete_resource', resource_id=r.id) }}"
              style="display:inline;">
          <button title="Delete">
            <span class="material-icons">delete</span>
          </button>
        </form>
      </li>
    {% else %}
      <li><em>No resources yet.</em></li>
    {% endfor %}
  </ul>
{% endblock %}

{% extends 'base.html' %}
{% block content %}
<section class="section">
  <div class="section-header">
    <h1>Resources</h1>
    <form class="inline-form" method="post" action="{{ url_for('add_resource') }}">
      <input
        type="text"
        name="name"
        placeholder="New resource name"
        required
        class="input"
      />
      <select name="type_id" class="input">
        <option value="">No Type</option>
        {% for t in types %}<option value="{{ t.id }}">{{ t.name }}</option>{% endfor %}
      </select>
      <select name="group_id" class="input">
        <option value="">No Group</option>
        {% for g in groups %}<option value="{{ g.id }}">{{ g.name }}</option>{% endfor %}
      </select>
      <button class="btn btn-primary">
        <span class="material-icons">add</span> Add Resource
      </button>
    </form>
  </div>

  <table id="resources-table"
         class="data-table"
         data-types='{{ types_data|tojson }}'
         data-groups='{{ groups_data|tojson }}'>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Group</th>
        <th style="width:160px">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for r in resources %}
      <tr data-resource-id="{{ r.id }}"
          data-type-id="{{ r.type_id or '' }}"
          data-group-id="{{ r.group_id or '' }}">
        <td class="name-cell">{{ r.name }}</td>
        <td class="type-cell">{{ r.type.name if r.type }}</td>
        <td class="group-cell">{{ r.group.name if r.group }}</td>
        <td class="action-cell">
          <button class="btn btn-secondary edit-btn"   title="Edit">
            <span class="material-icons">edit</span>
          </button>
          <button class="btn btn-secondary delete-btn" title="Delete">
            <span class="material-icons">delete</span>
          </button>
        </td>
      </tr>
      {% else %}
      <tr><td colspan="4"><em>No resources yet.</em></td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
